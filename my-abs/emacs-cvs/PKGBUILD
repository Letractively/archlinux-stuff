pkgname=emacs-cvs
pkgver=20070504
pkgrel=1
pkgdesc="Gnu Emacs from CVS"
arch=(i686)
url="http://www.gnu.org/software/emacs/emacs.html"
license="GPL"
depends=('ncurses' 'libpng' 'libtiff' 'libungif' 'xaw3d' 'gtk2')
makedepends=('cvs' 'openssh')
conflicts=('emacs' 'ctags')
provides=('emacs' 'ctags')
source=()
md5sums=()

_cvsroot=":pserver:anonymous@cvs.savannah.gnu.org:/sources"
_cvsmod="emacs"

build() {
	cd $startdir/src

	if [ -d $_cvsmod/CVS ]; then
	    cd $_cvsmod
	    cvs update -d
	else
    	    cvs -z3 -d$_cvsroot/$_cvsmod co $_cvsmod
	    cd emacs
	fi

        ./configure --prefix=/usr  --with-xpm  --with-jpeg --with-tiff --with-gif \
                    --with-png --with-gtk

	make bootstrap
        make || return 1
	make prefix=$startdir/pkg/usr install
}
