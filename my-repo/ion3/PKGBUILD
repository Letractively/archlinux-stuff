pkgname=ion3
pkgver=20080825
pkgrel=1
pkgdesc="Ion is a tiling windowmanager with tabbed frames scriptable in Lua."
arch=(i686 x86_64)
url="http://iki.fi/tuomov/ion/"
depends=('libsm' 'lua')
license=('GPL')
conflicts=(ion)
provides=(ion)
source=(http://iki.fi/tuomov/dl/ion-3-$pkgver.tar.gz)
md5sums=('8f0a8c93e80e967ad0dbe3f6cdd0bd3f')

build() {
  cd $startdir/src/ion-3-$pkgver

  sed -i "s#PREFIX=/usr/local#PREFIX=/usr#" system.mk || return 1
  sed -i "s#ETCDIR=\$(PREFIX)/etc/ion3#ETCDIR=\$(PREFIX)/../etc/ion3#" system.mk || return 1
  sed -i "s#LUA_DIR=/usr/local#LUA_DIR=/usr#" system.mk || return 1

  make || return 1

  sed -i "s#PREFIX=/usr#PREFIX=$startdir/pkg/usr#" system.mk || return 1
  make install || return 1
}
